<div>
    <div class="btn-group material-dropdown dropdown" uib-dropdown keyboard-nav on-toggle="searchQuery = ''">
        <button     id="{{::label}}"
                    type="button" class="btn btn-primary"
                    uib-dropdown-toggle
                    ng-class="{'item-selected': model.length}"
                    ng-focus="thisFocus = true"
                    ng-blur="thisFocus = false">
            {{label}}
            <span class="caret"></span>
        </button>
        <ul uib-dropdown-menu role="menu" class="inner" ng-class="{'bump-menu-for-search': search}" ng-click="$event.stopPropagation()">
            <div class="menu-search" ng-show="search">
                <form class="material-form form-group">
                    <div class="row">
                        <material-textbox ng-model="searchQuery" label="{{::label}}" mi-tb-focus-on="focusSearch"></material-textbox>
                    </div>
                </form>
            </div>
            <li role="menuitem" ng-repeat="li in list  | filter:{ name: searchQuery }" ng-show="li.show">
                <a href="" ng-click="itemSelected(li)">
                    <div class='item'>{{::li.name}}</div>
                    <span class="glyphicon glyphicon-ok" ng-show="li.selected"></span>
                </a>
            </li>
        </ul>
    </div>
    <label for="{{::label}}" class="with-text" ng-class="{'hide': !model.length, 'fade-in': model.length, active: thisFocus}">{{::label}}</label>
</div>